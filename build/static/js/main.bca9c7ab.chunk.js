(this["webpackJsonpjs-app"]=this["webpackJsonpjs-app"]||[]).push([[0],{40:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var r=n(16),c=n.n(r),o=n(7),a=n(3),u=n(2),i=n(4),s=n.n(i),l="/api/persons",b={getAll:function(){return s.a.get(l).then((function(e){return e.data}))},addNew:function(e){return s.a.post(l,e).then((function(e){return e.data}))},update:function(e){return s.a.put("".concat(l,"/").concat(e.id),e).then((function(e){return e.data}))},del:function(e){return s.a.delete("".concat(l,"/").concat(e)).then((function(e){return e.data}))}},j=(n(40),n(0)),d=function(e){var t=e.text,n=e.ok,r=e.cancel;if(!t)return null;console.log("ok=",n);return Object(j.jsxs)("div",{style:{color:"red",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10},children:[t," ",Object(j.jsx)("button",{onClick:n,children:"Ok"}),Object(j.jsx)("button",{onClick:r,children:"Cancel"})]})},f=function(e){var t=e.message,n=e.setMessage,r=t.text,c=t.color,o=t.time;if(r){var a={color:c,background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10};return o&&setTimeout((function(){n({text:"",color:"gray",time:0})}),o),Object(j.jsx)("div",{style:a,children:r})}return null},h=function(e){var t=e.text,n=e.val,r=e.onChange;e.id;return Object(j.jsxs)("p",{children:[Object(j.jsxs)("label",{htmlFor:t,children:[t,":"]}),"  ",Object(j.jsx)("input",{value:n,onChange:r,id:t})]})},m=function(e){var t=e.filter,n=e.onFilterChange;return Object(j.jsxs)("div",{children:[Object(j.jsx)(h,{text:"Filter",val:t,onChange:n}),Object(j.jsx)("button",{onClick:function(){return n({target:{value:""}})},children:"clear"})]})},O=function(e){var t=e.newName,n=e.newNumber,r=e.onSubmit,c=e.onPersonChange,o=e.onNumberChange;return Object(j.jsxs)("form",{onSubmit:r,children:[Object(j.jsx)(h,{text:"name",val:t,onChange:c}),Object(j.jsx)(h,{text:"number",val:n,onChange:o}),Object(j.jsx)("div",{children:Object(j.jsx)("button",{type:"submit",children:"add"})})]})},x=function(e){var t=e.personsToShow,n=e.toDel;return Object(j.jsx)("ul",{children:t.map((function(e){return Object(j.jsxs)("li",{children:[e.name," ",e.number,Object(j.jsx)("button",{onClick:function(){return n(e.id,e.name)},children:"del"})]},e.name)}))})},g=function(e){var t=Object(u.useState)([]),n=Object(a.a)(t,2),r=n[0],c=n[1],i=Object(u.useState)(""),s=Object(a.a)(i,2),l=s[0],h=s[1],g=Object(u.useState)(""),v=Object(a.a)(g,2),p=v[0],C=v[1],S=Object(u.useState)(""),k=Object(a.a)(S,2),w=k[0],y=k[1],N=Object(u.useState)({text:"",color:"gray",time:0}),A=Object(a.a)(N,2),D=A[0],F=A[1],B=Object(u.useState)(""),I=Object(a.a)(B,2),P=I[0],T=I[1],z=Object(u.useState)((function(){return function(){}})),E=Object(a.a)(z,2),J=E[0],L=E[1];Object(u.useEffect)((function(){b.getAll().then((function(e){return c(e)}))}),[]);var M=function(e,t){b.del(e).then((function(){return F({text:"Information of ".concat(t," has been removed from server"),color:"green",time:5e3})})).catch((function(){return F({text:"Information of ".concat(t," has alredy been removed from server"),color:"red",time:5e3})})).finally((function(){return b.getAll().then((function(e){return c(e)}))}))},R=""===w?r:r.filter((function(e){return e.name.toLowerCase().includes(w)}));return Object(j.jsxs)("div",{children:[Object(j.jsx)("h2",{children:"Phonebook"}),Object(j.jsx)(d,{text:P,ok:J,cancel:function(){return T("")}}),Object(j.jsx)(f,{message:D,setMessage:F}),Object(j.jsx)(m,{filter:w,onFilterChange:function(e){return y(e.target.value.toLowerCase())}}),Object(j.jsx)("hr",{}),Object(j.jsx)(O,{newName:l,newNumber:p,onSubmit:function(e){if(e.preventDefault(),r.every((function(e){return e.name!==l}))){var t={name:l,number:p};b.addNew(t).then((function(e){c(r.concat(e)),h(""),C(""),F({text:"Added ".concat(e.name),color:"green",time:5e3})}))}else if(window.confirm("".concat(l," is already added to phonebook, replace?"))){var n=Object(o.a)(Object(o.a)({},r.find((function(e){return e.name===l}))),{},{number:p});b.update(n).then((function(e){c(r.map((function(t){return t.id===e.id?e:t}))),h(""),C("")}))}},onPersonChange:function(e){return h(e.target.value)},onNumberChange:function(e){return C(e.target.value)}}),Object(j.jsx)("hr",{}),Object(j.jsx)("h2",{children:"Numbers: "}),Object(j.jsx)(x,{personsToShow:R,toDel:function(e,t){L((function(){return function(){M(e,t),T("")}})),T("Delete ".concat(t,"?"))}})]})};c.a.render(Object(j.jsx)(g,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.bca9c7ab.chunk.js.map